
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4.1 - The Basics &#8212; GNUstep</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Guides/App/4_Money/4.1';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="4.2 - Document Editor" href="4.2.html" />
    <link rel="prev" title="4 - Money" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">GNUstep</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../Manuals/index.html">
    Manuals
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../APIRefs/index.html">
    API references
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../About/index.html">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../Showcase/index.html">
    Showcase
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../Manuals/index.html">
    Manuals
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../APIRefs/index.html">
    API references
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../About/index.html">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../Showcase/index.html">
    Showcase
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Setup/index.html">Installation and Setup</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../Setup/Linux/index.html">Linux</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Setup/Linux/building-linux.html">Building on Linux</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../Setup/Windows/index.html">Windows</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Setup/Windows/sdk-setup.html">SDK/Environment setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Setup/Windows/installing-windows-msvc.html">Installing the GNUstep MSVC toolchain on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Setup/Windows/using-windows-msvc-msys2.html">Using the GNUstep MSVC toolchain from MSYS2</a></li>

<li class="toctree-l3"><a class="reference internal" href="../../Setup/Windows/building-windows-msvc.html">Building on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Setup/Windows/ide-setup.html">IDE setup</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">Building Apps with GORM</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../1_Intro/index.html">1 - Introduction to GNUstep Programming</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../2_Convertor/index.html">2 - Convertor</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../2_Convertor/2.1.html">2.1 - Designing the UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_Convertor/2.2.html">2.2 - Outlets and Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_Convertor/2.3.html">2.3 - Adding the Code</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../3_TimeMachine/index.html">3 - TimeMachine</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.1.html">3.1 - A Basic Clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.2.html">3.2 - Analog Clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.3.html">3.3 - New Time Zone Dialog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.4.html">3.4 - Multiple Clocks</a></li>
</ul>
</details></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">4 - Money</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3 current active"><a class="current reference internal" href="#">4.1 - The Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.2.html">4.2 - Document Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.3.html">4.3 - Load and Save</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.4.html">4.4 - Drag and Drop</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../5_Overview/index.html">5 - Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6_LunarCalendar/index.html">6 - LunarCalendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7_NSLookupService/index.html">7 - NSLookupService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../HelpfulWebsites.html">Helpful Websites</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../AppsWithCodeOnly/index.html">Building Apps from Code Only</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/index.html">First Steps in GNUstep GUI Programming</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/1_SharedApplication.html">1 - The shared application object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/2_AppIcon.html">2 - Setting your application’s icon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/3_Menus.html">3 - Menus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/4_PointsSizesRectangles.html">4 - Points, Sizes and Rectangles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/5_Windows.html">5 - Adding a Window to your Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/6_Buttons.html">6 - Adding a Button in the Window</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">Guides</a></li>
    
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Building Apps with GORM</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">4 - Money</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">4.1 - The Basics</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="the-basics">
<h1>4.1 - The Basics<a class="headerlink" href="#the-basics" title="Link to this heading">#</a></h1>
<p>Have you ever used a document-based application? I’d bet you have – document-based applications are one of the most common types of applications. Computers would be useless without them. Document-based applications are applications that interact with documents, such as text files, pictures, videos, and code. Web browsers are also document-based applications. In fact, document-based applications were invented long before computers – typewriters are essentially document-based applications, and you could argue that pen and paper are also document-based.</p>
<p>OpenStep, and therefore Cocoa and GNUstep, comes with built-in support for document-based applications in its Application Kit. This tutorial won’t cover everything you need to know about them – please read the <a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/Conceptual/Documents/index.html"><em>Cocoa document about document-based applications</em></a>.
Otherwise, you probably will not know what I
am doing.</p>
<p>Document-based apps look complicated at first – you have to deal with
<code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code>, <code class="docutils literal notranslate"><span class="pre">NSWindowController</span></code>, <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> and <code class="docutils literal notranslate"><span class="pre">NSWindow</span></code>.
However, since we’ll use Gorm to build the <code class="docutils literal notranslate"><span class="pre">NSWindow</span></code>, and
<code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code> and <code class="docutils literal notranslate"><span class="pre">NSWindowController</span></code> are not required to
subclass, <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> is the only class we have to deal with. That makes
everything very easy.</p>
<p>In this section, we only make the skeleton of the
document-based application. We’ll add more features in the next part of this tutorial.</p>
<section id="skeleton-user-interface">
<h2>Skeleton user interface<a class="headerlink" href="#skeleton-user-interface" title="Link to this heading">#</a></h2>
<p>Now, we have to create the main user interface. Since it’ i’s a
document-based application, there is no main window. We only need
a menu so that users can open, save and close each document.</p>
<p>Open Gorm, choose “Document→New Application”. Click the window in the
Gorm main window, use “Edit→Delete” to delete the window. Drag the
menus “Info” and “Document” into the main menu. The main user interface
will be like this:</p>
<p><span id="AEN915"></span></p>
<p><strong>Figure 4-32. Menu of document-based application</strong></p>
<p><img alt="" src="../../../_images/Money-01.jpg" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not having a main window can cause problems if you’re using a global or local menu bar, rather than a floating menu. Additionally, it’s not what users expect except on macOS. We’ll address these issues later.</p>
</div>
<p>Next, I need a <code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code>. Choose the class
<code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code>, and use menu item “Classes→Instantiate” to make an
instance.</p>
<p><span id="AEN922"></span></p>
<p><strong>Figure 4-33. Create instance of <code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code></strong></p>
<p><img alt="" src="../../../_images/Money-02.jpg" /></p>
<p>The main user interface is done. Save it as “Money.gorm”.</p>
<p><code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code> will look at the property list of this application
in order to know what kind of document it should handle. Here is the property list we’ll be using:</p>
<p><code class="docutils literal notranslate"><span class="pre">MoneyInfo.plist</span></code></p>
<div class="highlight-plist notranslate"><div class="highlight"><pre><span></span>{
    ApplicationDescription = &quot;Money&quot;;
    ApplicationIcon = &quot;&quot;;
    ApplicationName = Money;
    ApplicationRelease = 0.1;
    Authors = &quot;&quot;;
    Copyright = &quot;Copyright (C) 200x by ...&quot;;
    CopyrightDescription = &quot;Released under...&quot;;
    FullVersionID = 0.1;
    URL = &quot;&quot;;
    NSTypes = (
        {
            NSName = &quot;mon&quot;;
            NSHumanReadableName = &quot;Money Document&quot;;
            NSUnixExtensions = (&quot;mon&quot;);
            NSRole = Editor;
            NSDocumentClass = Document;
        }
    );
}
</pre></div>
</div>
<p>The important part is that <code class="docutils literal notranslate"><span class="pre">NSTypes</span></code> defines what kinds of documents our application, “Money”,
can handle, and what class (which should be a subclass of <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code>) handles the document. In this case, <em>Money.app</em> edits “Money Documents” with file extension <code class="docutils literal notranslate"><span class="pre">.mon</span></code>, using the class <code class="docutils literal notranslate"><span class="pre">Document</span></code>, which we haven’t implemented yet. This is a simplified property
list, but it works. Look at <a class="reference external" href="https://github.com/gnustep/tests-examples/blob/master/gui/Ink/InkInfo.plist"><code class="docutils literal notranslate"><span class="pre">InkInfo.plist</span></code></a> from the <em>Ink</em> example application for a better example.</p>
<p>Now, we need to create the class <code class="docutils literal notranslate"><span class="pre">Document</span></code>, and
the window for each document. Open Gorm, choose “Document→New
Empty”. Drag a window out of the palettes. We won’t do anything in the window yet – we’ll flesh out the UI in the next section.</p>
<p>Look at the classes in the Gorm main window, and use “Classes→Create
Subclass” to create a subclass of <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code>, called <code class="docutils literal notranslate"><span class="pre">Document</span></code>.</p>
<p><span id="AEN936"></span></p>
<p><strong>Figure 4-34. Create <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> subclass</strong></p>
<p><img alt="" src="../../../_images/Money-03.jpg" /></p>
<p>Don’t instantiate it. Instead, we’ll make it the owner of the document
window (in <u>Objects</u>). Click the NSOwner in the Gorm main window, and select the <u>Attributes</u> pane in the inspector. Choose the <code class="docutils literal notranslate"><span class="pre">Document</span></code> class.</p>
<p><span id="AEN942"></span></p>
<p><strong>Figure 4-35. Set document as NSOwner of window</strong></p>
<p><img alt="" src="../../../_images/Money-04.jpg" /></p>
<p><img alt="" src="../../../_images/Money-05.jpg" /></p>
<p>Now, the NSOwner is the class of Document. I need to connect the
<code class="docutils literal notranslate"><span class="pre">_window</span></code> outlet of NSOwner (an instance of <code class="docutils literal notranslate"><span class="pre">Document</span></code>) to the window,</p>
<p><span id="AEN951"></span></p>
<p><strong>Figure 4-36. Connect NSOwner to window</strong></p>
<p><img alt="" src="../../../_images/Money-06.jpg" /></p>
<p><img alt="" src="../../../_images/Money-07.jpg" /></p>
<p>and the set the delegate of window to the NSOwner (an instance of <code class="docutils literal notranslate"><span class="pre">Document</span></code>).</p>
<p><span id="AEN960"></span></p>
<p><strong>Figure 4-37. Connect delegate to NSOwner</strong></p>
<p><img alt="" src="../../../_images/Money-08.jpg" /></p>
<p><img alt="" src="../../../_images/Money-09.jpg" /></p>
<p>Finally, use “Classes→Create Class Files” to create the files of
class <code class="docutils literal notranslate"><span class="pre">Document</span></code>. Save them to Document.m and Document.h. Save the Gorm
file into “Document.gorm”.</p>
</section>
<section id="loading-the-user-interface">
<h2>Loading the user interface<a class="headerlink" href="#loading-the-user-interface" title="Link to this heading">#</a></h2>
<p>Now, we have five files: Money.gorm, MoneyInfo.plist, Document.h, Document.m and
Document.gorm (which is actually a special kind of directory, called a “bundle”).</p>
<p><code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code> knows what class to use because it is written in the
property list file. How does <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> (or its subclass, <code class="docutils literal notranslate"><span class="pre">Document</span></code>) know what the document viewer is? In this case, <em>Money.app</em>’s document viewer is <code class="docutils literal notranslate"><span class="pre">Document.gorm</span></code>. The simplest way to tell <code class="docutils literal notranslate"><span class="pre">Document</span></code> about <code class="docutils literal notranslate"><span class="pre">Document.gorm</span></code> is to implement the method
<code class="docutils literal notranslate"><span class="pre">-windowNibName:</span></code> in <code class="docutils literal notranslate"><span class="pre">Document</span></code>.</p>
<p>The Document files that Gorm created for us
won’t work perfectly. Enter the following code instead:</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.h:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &lt;AppKit/AppKit.h&gt;</span>
<span class="cp">#import &lt;AppKit/NSDocument.h&gt;</span>

<span class="k">@interface</span> <span class="nc">Document</span> : <span class="nc">NSDocument</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &quot;Document.h&quot;</span>

<span class="k">@implementation</span> <span class="nc">Document</span>

<span class="p">-</span> <span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span> <span class="nf">windowNibName</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">@&quot;Document.gorm&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>
</div>
<p>I deleted the extra code inherited from <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code>. Include
<code class="docutils literal notranslate"><span class="pre">&lt;AppKit/NSDocument.h&gt;</span></code> explicitly in the header file because <code class="docutils literal notranslate"><span class="pre">&lt;AppKit/AppKit.h</span></code> doesn’t
include it (at least on some platforms). The most important part is that I return the name of the
document interface, <code class="docutils literal notranslate"><span class="pre">Document.gorm</span></code>, so that <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> can find where
the interface are.</p>
<p>Here are the rest of the files:</p>
<p><code class="docutils literal notranslate"><span class="pre">main.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &lt;AppKit/AppKit.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">NSApplicationMain</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">GNUmakefile:</span></code></p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="cp">include $(GNUSTEP_MAKEFILES)/common.make</span>

<span class="nv">APP_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Money
<span class="nv">Money_HEADERS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Document.h
<span class="nv">Money_OBJC_FILES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>main.m<span class="w"> </span><span class="se">\</span>
<span class="w">                   </span>Document.m
<span class="nv">Money_RESOURCE_FILES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>MoneyInfo.plist<span class="w"> </span><span class="se">\</span>
<span class="w">                       </span>Money.gorm<span class="w"> </span><span class="se">\</span>
<span class="w">                       </span>Document.gorm
<span class="nv">Money_MAIN_MODEL_FILE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Money.gorm

<span class="cp">include $(GNUSTEP_MAKEFILES)/application.make</span>
</pre></div>
</div>
<blockquote>
<div><p>Here is the source code:
<a class="reference external" href="http://gnustep.made-it.com/GSPT/Money/Money-src.tar.gz">Money-src.tar.gz</a></p>
</div></blockquote>
<p>Compile the application with <code class="docutils literal notranslate"><span class="pre">make</span></code>, and run it with <code class="docutils literal notranslate"><span class="pre">openapp</span> <span class="pre">./Money.app</span></code>.</p>
<p>Once the application starts up, you will see only the menu. Use
“Document→New” to open a new document. A empty window will show up.
You can keep as many documents as you want. The menu items will be
automatically enabled depending on the existance of the document. Most
menu doesn’t work yet.</p>
<p>GNUstep offers a great framework for document-based applications. With GNUstep, we only need to focus on the document itself, and don’t need to
worry about how to manage the multiple documents/windows. GNUstep will
handle it perfectly.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">4 - Money</p>
      </div>
    </a>
    <a class="right-next"
       href="4.2.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">4.2 - Document Editor</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#skeleton-user-interface">Skeleton user interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-the-user-interface">Loading the user interface</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../../_sources/Guides/App/4_Money/4.1.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, GNUstep contributors.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>