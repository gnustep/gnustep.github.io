
<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4.4 - Drag and Drop &#8212; GNUstep</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=359c27e9"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Guides/App/4_Money/4.4';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="5 - Overview" href="../5_Overview/index.html" />
    <link rel="prev" title="4.3 - Load and Save" href="4.3.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">GNUstep</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../../index.html">
                        Guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../Manuals/index.html">
                        Manuals
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../APIRefs/index.html">
                        API references
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../About/index.html">
                        About
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../Showcase/index.html">
                        Showcase
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../../index.html">
                        Guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../Manuals/index.html">
                        Manuals
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../APIRefs/index.html">
                        API references
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../About/index.html">
                        About
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../Showcase/index.html">
                        Showcase
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">Building Apps with GORM</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../1_Intro/index.html">1 - Introduction to GNUstep Programming</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../2_Convertor/index.html">2 - Convertor</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../2_Convertor/2.1.html">2.1 - Designing the UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_Convertor/2.2.html">2.2 - Outlets and Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2_Convertor/2.3.html">2.3 - Adding the Code</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../3_TimeMachine/index.html">3 - TimeMachine</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.1.html">3.1 - A Basic Clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.2.html">3.2 - Analog Clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.3.html">3.3 - New Time Zone Dialog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3_TimeMachine/3.4.html">3.4 - Multiple Clocks</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">4 - Money</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="4.1.html">4.1 - The Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.2.html">4.2 - Document Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="4.3.html">4.3 - Load and Save</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">4.4 - Drag and Drop</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../5_Overview/index.html">5 - Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6_LunarCalendar/index.html">6 - LunarCalendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7_NSLookupService/index.html">7 - NSLookupService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../HelpfulWebsites.html">Helpful Websites</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../AppsWithCodeOnly/index.html">Building Apps from Code Only</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/index.html">First Steps in GNUstep GUI Programming</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/1_SharedApplication.html">1 - The shared application object</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/2_AppIcon.html">2 - Setting your application’s icon</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/3_Menus.html">3 - Menus</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/4_PointsSizesRectangles.html">4 - Points, Sizes and Rectangles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/5_Windows.html">5 - Adding a Window to your Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../AppsWithCodeOnly/GettingStarted/6_Buttons.html">6 - Adding a Button in the Window</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Install/index.html">Installation</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Install/Linux.html">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Install/Windows.html">Windows</a></li>
</ul>
</li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">





<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">Guides</a></li>
    
    
    <li class="breadcrumb-item"><i class="fa-solid fa-ellipsis"></i></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">4 - Money</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">4.4 - Drag and Drop</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="drag-and-drop">
<h1>4.4 - Drag and Drop<a class="headerlink" href="#drag-and-drop" title="Permalink to this heading">#</a></h1>
<p><a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/TasksAndConcepts/ProgrammingTopics/DragandDrop/index.html"><em>Drag and drop in
general</em></a>
is easy, but even easier in <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. Here is an article about it:
<a class="reference external" href="http://cocoadevcentral.com/articles/000056.php"><em>Drag and Drop
Destinations</em></a>.
Basically, drag and drop is copy and paste with graphic interactivity.
Therefore, it involves the pasteboard. I’ll add the fuction of drag and
drop in this tutorial so that you can drag and drop in-between different
document. <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> has its built-in drag and drop support. Therefore,
it is sort of different from drag and drop in general. Here is the
<a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/TasksAndConcepts/ProgrammingTopics/TableView/Tasks/UsingDragAndDrop.html"><em>drag and drop in <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> from
Cocoa</em></a>.</p>
<p>Firstly, I need to set up the dragging source, the source you can drag
something out. I need to register the table as dragging source, and
implement one method.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">windowControllerDidLoadNib:</span><span class="w"> </span><span class="p">(</span><span class="n">NSWindowController</span><span class="o">*</span><span class="p">)</span> <span class="nv">controller</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">NSTableColumn</span><span class="w"> </span><span class="o">*</span><span class="n">column</span><span class="p">;</span>
<span class="w">    </span><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">tableColumns</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">columns</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;date&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Date&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">columns</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;item&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Item&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">NSTableColumn</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">initWithIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;amount&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Amount&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">addTableColumn</span><span class="o">:</span><span class="w"> </span><span class="n">column</span><span class="p">];</span>
<span class="w">    </span><span class="n">RELEASE</span><span class="p">(</span><span class="n">column</span><span class="p">);</span>

<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">sizeLastColumnToFit</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">setAutoresizesAllColumnsToFit</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">registerForDraggedTypes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="bp">NSArray</span><span class="w"> </span><span class="n">arrayWithObjects</span><span class="o">:</span><span class="w"> </span><span class="n">NSGeneralPboardType</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">]];</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span> <span class="nf">tableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span>
<span class="w">         </span><span class="nl">writeRows</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="p">)</span> <span class="nv">rows</span>
<span class="w">      </span><span class="nl">toPasteboard</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">NSPasteboard</span><span class="w"> </span><span class="o">*</span><span class="p">)</span> <span class="nv">pboard</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">id</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="p">[[</span><span class="n">rows</span><span class="w"> </span><span class="n">lastObject</span><span class="p">]</span><span class="w"> </span><span class="n">intValue</span><span class="p">]];</span>
<span class="w">    </span><span class="bp">NSData</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">NSArchiver</span><span class="w"> </span><span class="n">archivedDataWithRootObject</span><span class="o">:</span><span class="w"> </span><span class="n">object</span><span class="p">];</span>

<span class="w">    </span><span class="p">[</span><span class="n">pboard</span><span class="w"> </span><span class="n">declareTypes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="bp">NSArray</span><span class="w"> </span><span class="n">arrayWithObject</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;NSGeneralPboardType&quot;</span><span class="p">]</span>
<span class="w">                                             </span><span class="nl">owner</span><span class="p">:</span><span class="w"> </span><span class="nb">nil</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">pboard</span><span class="w"> </span><span class="n">setData</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">forType</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;NSGeneralPboardType&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In method -windowControllerDidLoadNib:, <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> register what kind
of pasteboard it will use. Once it registers, it is ready to drag and
drop. The <a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/TasksAndConcepts/ProgrammingTopics/CopyandPaste/index.html"><em>usage of
pasteboard</em></a>
is not covered in this tutorial. Basically, you set the type of
pasteboard, put data in, and take it out.</p>
<p>Method -tableView:writeRows:toPasteboard will be called when user try to
drag some rows out of the table, It is the methods in the data source of
table, not in the delegate of table. Therefore, in this method, I only
need to put the data into pasteboard. Since this table only allow single
selection, I only need to handle the data in one row, which is a
NSDictionary. I archive NSDictionary into NSData, put it into pasteboard
of NSGeneralPboardType, then return YES. Now, you can drag the row out
of the table.</p>
<p><code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> will handle all the graphic interactivity. When users drop
the data into another document, I need to implement two methods.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="n">NSDragOperation</span><span class="p">)</span> <span class="nf">tableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span>
<span class="w">                 </span><span class="nl">validateDrop</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">id</span><span class="o">&lt;</span><span class="n">NSDraggingInfo</span><span class="o">&gt;</span><span class="p">)</span> <span class="nv">info</span>
<span class="w">                  </span><span class="nl">proposedRow</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="nv">row</span>
<span class="w">        </span><span class="nl">proposedDropOperation</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableViewDropOperation</span><span class="p">)</span> <span class="nv">operation</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">row</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">count</span><span class="p">])</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">NSDragOperationNone</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">nil</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[</span><span class="n">info</span><span class="w"> </span><span class="n">draggingSource</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From other application</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">NSDragOperationNone</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tableView</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[</span><span class="n">info</span><span class="w"> </span><span class="n">draggingSource</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From self</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">NSDragOperationNone</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From other documents </span>
<span class="w">        </span><span class="p">[</span><span class="n">view</span><span class="w"> </span><span class="n">setDropRow</span><span class="o">:</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">dropOperation</span><span class="o">:</span><span class="w"> </span><span class="n">NSTableViewDropAbove</span><span class="p">];</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">NSDragOperationCopy</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span> <span class="nf">tableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span>
<span class="w">        </span><span class="nl">acceptDrop</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">id</span><span class="o">&lt;</span><span class="n">NSDraggingInfo</span><span class="o">&gt;</span><span class="p">)</span> <span class="nv">info</span>
<span class="w">               </span><span class="nl">row</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="nv">row</span>
<span class="w">     </span><span class="nl">dropOperation</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableViewDropOperation</span><span class="p">)</span> <span class="nv">operation</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">NSPasteboard</span><span class="w"> </span><span class="o">*</span><span class="n">pboard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">info</span><span class="w"> </span><span class="n">draggingPasteboard</span><span class="p">];</span>
<span class="w">    </span><span class="bp">NSData</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">pboard</span><span class="w"> </span><span class="n">dataForType</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;NSGeneralPboardType&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">row</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">count</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">nil</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[</span><span class="n">info</span><span class="w"> </span><span class="n">draggingSource</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From other application</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tableView</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[</span><span class="n">info</span><span class="w"> </span><span class="n">draggingSource</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From self</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From other documents</span>
<span class="w">        </span><span class="kt">id</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">NSUnarchiver</span><span class="w"> </span><span class="n">unarchiveObjectWithData</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">];</span>
<span class="w">        </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">insertObject</span><span class="o">:</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">atIndex</span><span class="o">:</span><span class="w"> </span><span class="n">row</span><span class="p">];</span>
<span class="w">        </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">reloadData</span><span class="p">];</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When users hold the mouse button and move above the table, the table
will keep receiving the call for method
-tableView:validateDrop:proposedRow:ProposedDropOperation:. The only
thing I need to do in this method is to examine the proposed drop and
return the action I can accept. If the source is not from other
documents, return NSDragOperationNone to indicate that this table
doesn’t accept drop. Otherwise, return NSDragOperationCopy to indicate
that this table accept copy. In table, you can drop between rows or over
rows. That’s NSTableViewDropOperation means. I only want to insert the
data. When it is proposed to drop, I change the propose by
-setDropRow:dropOperation:. By this way, I can change all the drop
in-between rows, not over rows. So this method gives the table chances
to change its interface when mouse is moving above it.</p>
<p>Once users release the mouse button, method
-tableView:acceptDrop:row:dropOperation: will be called. I get the
dropped data from this method. Extract the data from pbastebord,
unarchive into NSDictionary, and add into records. Don’t forget to
reload the table to reflect the change.</p>
<p><code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> offers the basic fuction of drag and drop, which is useful
for general applications. If you want more support for drag and drop,
you have to subclass <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> and write your own using the general
drag and drop support of GNUstep. For example, <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> doesn’t
support drag and drop from other application. If you want to do that,
you have to subclass <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. I’ll talk about the drag and drop in
general later.</p>
<p>Here is the source code:
<a class="reference external" href="http://gnustep.made-it.com/GSPT/DragDropInTable/DragDropInTable-src.tar.gz">DragDropInTable-src.tar.gz</a></p>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="4.3.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">4.3 - Load and Save</p>
      </div>
    </a>
    <a class="right-next"
       href="../5_Overview/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">5 - Overview</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../../_sources/Guides/App/4_Money/4.4.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, GNUstep contributors.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>