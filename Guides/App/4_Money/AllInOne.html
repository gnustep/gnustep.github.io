
<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4 - Money &#8212; GNUstep</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js?v=359c27e9"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Guides/App/4_Money/AllInOne';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">GNUstep</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../index.html">
                        Guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../Manuals/index.html">
                        Manuals
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../APIRefs/index.html">
                        API references
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../About/index.html">
                        About
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../Showcase/index.html">
                        Showcase
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../index.html">
                        Guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../Manuals/index.html">
                        Manuals
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../APIRefs/index.html">
                        API references
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../About/index.html">
                        About
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../Showcase/index.html">
                        Showcase
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">4 - Money</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="money">
<h1>4 - Money<a class="headerlink" href="#money" title="Permalink to this heading">#</a></h1>
<p>In this tutorial, you’ll learn to build a document-based application.</p>
<section id="topics">
<h2>Topics<a class="headerlink" href="#topics" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Document-based applications</p></li>
</ul>
</section>
</section>
<section id="the-basics">
<h1>4.1 - The Basics<a class="headerlink" href="#the-basics" title="Permalink to this heading">#</a></h1>
<p>Have you ever used a document-based application? I’d bet you have – document-based applications are one of the most common types of applications. Computers would be useless without them. Document-based applications are applications that interact with documents, such as text files, pictures, videos, and code. Web browsers are also document-based applications. In fact, document-based applications were invented long before computers – typewriters are essentially document-based applications, and you could argue that pen and paper are also document-based.</p>
<p>OpenStep, and therefore Cocoa and GNUstep, comes with built-in support for document-based applications in its Application Kit. This tutorial won’t cover everything you need to know about them – please read the <a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/Conceptual/Documents/index.html"><em>Cocoa document about document-based applications</em></a>.
Otherwise, you probably will not know what I
am doing.</p>
<p>Document-based apps look complicated at first – you have to deal with
<code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code>, <code class="docutils literal notranslate"><span class="pre">NSWindowController</span></code>, <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> and <code class="docutils literal notranslate"><span class="pre">NSWindow</span></code>.
However, since we’ll use Gorm to build the <code class="docutils literal notranslate"><span class="pre">NSWindow</span></code>, and
<code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code> and <code class="docutils literal notranslate"><span class="pre">NSWindowController</span></code> are not required to
subclass, <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> is the only class we have to deal with. That makes
everything very easy.</p>
<p>In this section, we only make the skeleton of the
document-based application. We’ll add more features in the next part of this tutorial.</p>
<section id="skeleton-user-interface">
<h2>Skeleton user interface<a class="headerlink" href="#skeleton-user-interface" title="Permalink to this heading">#</a></h2>
<p>Now, we have to create the main user interface. Since it’ i’s a
document-based application, there is no main window. We only need
a menu so that users can open, save and close each document.</p>
<p>Open Gorm, choose “Document→New Application”. Click the window in the
Gorm main window, use “Edit→Delete” to delete the window. Drag the
menus “Info” and “Document” into the main menu. The main user interface
will be like this:</p>
<p><span id="AEN915"></span></p>
<p><strong>Figure 4-32. Menu of document-based application</strong></p>
<p><img alt="" src="../../../_images/Money-01.jpg" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not having a main window can cause problems if you’re using a global or local menu bar, rather than a floating menu. Additionally, it’s not what users expect except on macOS. We’ll address these issues later.</p>
</div>
<p>Next, I need a <code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code>. Choose the class
<code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code>, and use menu item “Classes→Instantiate” to make an
instance.</p>
<p><span id="AEN922"></span></p>
<p><strong>Figure 4-33. Create instance of <code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code></strong></p>
<p><img alt="" src="../../../_images/Money-02.jpg" /></p>
<p>The main user interface is done. Save it as “Money.gorm”.</p>
<p><code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code> will look at the property list of this application
in order to know what kind of document it should handle. Here is the property list we’ll be using:</p>
<p><code class="docutils literal notranslate"><span class="pre">MoneyInfo.plist</span></code></p>
<div class="highlight-plist notranslate"><div class="highlight"><pre><span></span>{
    ApplicationDescription = &quot;Money&quot;;
    ApplicationIcon = &quot;&quot;;
    ApplicationName = Money;
    ApplicationRelease = 0.1;
    Authors = &quot;&quot;;
    Copyright = &quot;Copyright (C) 200x by ...&quot;;
    CopyrightDescription = &quot;Released under...&quot;;
    FullVersionID = 0.1;
    URL = &quot;&quot;;
    NSTypes = (
        {
            NSName = &quot;mon&quot;;
            NSHumanReadableName = &quot;Money Document&quot;;
            NSUnixExtensions = (&quot;mon&quot;);
            NSRole = Editor;
            NSDocumentClass = Document;
        }
    );
}
</pre></div>
</div>
<p>The important part is that <code class="docutils literal notranslate"><span class="pre">NSTypes</span></code> defines what kinds of documents our application, “Money”,
can handle, and what class (which should be a subclass of <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code>) handles the document. In this case, <em>Money.app</em> edits “Money Documents” with file extension <code class="docutils literal notranslate"><span class="pre">.mon</span></code>, using the class <code class="docutils literal notranslate"><span class="pre">Document</span></code>, which we haven’t implemented yet. This is a simplified property
list, but it works. Look at <a class="reference external" href="https://github.com/gnustep/tests-examples/blob/master/gui/Ink/InkInfo.plist"><code class="docutils literal notranslate"><span class="pre">InkInfo.plist</span></code></a> from the <em>Ink</em> example application for a better example.</p>
<p>Now, we need to create the class <code class="docutils literal notranslate"><span class="pre">Document</span></code>, and
the window for each document. Open Gorm, choose “Document→New
Empty”. Drag a window out of the palettes. We won’t do anything in the window yet – we’ll flesh out the UI in the next section.</p>
<p>Look at the classes in the Gorm main window, and use “Classes→Create
Subclass” to create a subclass of <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code>, called <code class="docutils literal notranslate"><span class="pre">Document</span></code>.</p>
<p><span id="AEN936"></span></p>
<p><strong>Figure 4-34. Create <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> subclass</strong></p>
<p><img alt="" src="../../../_images/Money-03.jpg" /></p>
<p>Don’t instantiate it. Instead, we’ll make it the owner of the document
window (in <u>Objects</u>). Click the NSOwner in the Gorm main window, and select the <u>Attributes</u> pane in the inspector. Choose the <code class="docutils literal notranslate"><span class="pre">Document</span></code> class.</p>
<p><span id="AEN942"></span></p>
<p><strong>Figure 4-35. Set document as NSOwner of window</strong></p>
<p><img alt="" src="../../../_images/Money-04.jpg" /></p>
<p><img alt="" src="../../../_images/Money-05.jpg" /></p>
<p>Now, the NSOwner is the class of Document. I need to connect the
<code class="docutils literal notranslate"><span class="pre">_window</span></code> outlet of NSOwner (an instance of <code class="docutils literal notranslate"><span class="pre">Document</span></code>) to the window,</p>
<p><span id="AEN951"></span></p>
<p><strong>Figure 4-36. Connect NSOwner to window</strong></p>
<p><img alt="" src="../../../_images/Money-06.jpg" /></p>
<p><img alt="" src="../../../_images/Money-07.jpg" /></p>
<p>and the set the delegate of window to the NSOwner (an instance of <code class="docutils literal notranslate"><span class="pre">Document</span></code>).</p>
<p><span id="AEN960"></span></p>
<p><strong>Figure 4-37. Connect delegate to NSOwner</strong></p>
<p><img alt="" src="../../../_images/Money-08.jpg" /></p>
<p><img alt="" src="../../../_images/Money-09.jpg" /></p>
<p>Finally, use “Classes→Create Class Files” to create the files of
class <code class="docutils literal notranslate"><span class="pre">Document</span></code>. Save them to Document.m and Document.h. Save the Gorm
file into “Document.gorm”.</p>
</section>
<section id="loading-the-user-interface">
<h2>Loading the user interface<a class="headerlink" href="#loading-the-user-interface" title="Permalink to this heading">#</a></h2>
<p>Now, we have five files: Money.gorm, MoneyInfo.plist, Document.h, Document.m and
Document.gorm (which is actually a special kind of directory, called a “bundle”).</p>
<p><code class="docutils literal notranslate"><span class="pre">NSDocumentController</span></code> knows what class to use because it is written in the
property list file. How does <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> (or its subclass, <code class="docutils literal notranslate"><span class="pre">Document</span></code>) know what the document viewer is? In this case, <em>Money.app</em>’s document viewer is <code class="docutils literal notranslate"><span class="pre">Document.gorm</span></code>. The simplest way to tell <code class="docutils literal notranslate"><span class="pre">Document</span></code> about <code class="docutils literal notranslate"><span class="pre">Document.gorm</span></code> is to implement the method
<code class="docutils literal notranslate"><span class="pre">-windowNibName:</span></code> in <code class="docutils literal notranslate"><span class="pre">Document</span></code>.</p>
<p>The Document files that Gorm created for us
won’t work perfectly. Enter the following code instead:</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.h:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &lt;AppKit/AppKit.h&gt;</span>
<span class="cp">#import &lt;AppKit/NSDocument.h&gt;</span>

<span class="k">@interface</span> <span class="nc">Document</span> : <span class="nc">NSDocument</span>
<span class="p">{</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &quot;Document.h&quot;</span>

<span class="k">@implementation</span> <span class="nc">Document</span>

<span class="p">-</span> <span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span> <span class="nf">windowNibName</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">@&quot;Document.gorm&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>
</pre></div>
</div>
<p>I deleted the extra code inherited from <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code>. Include
<code class="docutils literal notranslate"><span class="pre">&lt;AppKit/NSDocument.h&gt;</span></code> explicitly in the header file because <code class="docutils literal notranslate"><span class="pre">&lt;AppKit/AppKit.h</span></code> doesn’t
include it (at least on some platforms). The most important part is that I return the name of the
document interface, <code class="docutils literal notranslate"><span class="pre">Document.gorm</span></code>, so that <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code> can find where
the interface are.</p>
<p>Here are the rest of the files:</p>
<p><code class="docutils literal notranslate"><span class="pre">main.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &lt;AppKit/AppKit.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">NSApplicationMain</span><span class="p">(</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="n">argv</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">GNUmakefile:</span></code></p>
<div class="highlight-makefile notranslate"><div class="highlight"><pre><span></span><span class="cp">include $(GNUSTEP_MAKEFILES)/common.make</span>

<span class="nv">APP_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Money
<span class="nv">Money_HEADERS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Document.h
<span class="nv">Money_OBJC_FILES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>main.m<span class="w"> </span><span class="se">\</span>
<span class="w">                   </span>Document.m
<span class="nv">Money_RESOURCE_FILES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>MoneyInfo.plist<span class="w"> </span><span class="se">\</span>
<span class="w">                       </span>Money.gorm<span class="w"> </span><span class="se">\</span>
<span class="w">                       </span>Document.gorm
<span class="nv">Money_MAIN_MODEL_FILE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Money.gorm

<span class="cp">include $(GNUSTEP_MAKEFILES)/application.make</span>
</pre></div>
</div>
<blockquote>
<div><p>Here is the source code:
<a class="reference external" href="http://gnustep.made-it.com/GSPT/Money/Money-src.tar.gz">Money-src.tar.gz</a></p>
</div></blockquote>
<p>Compile the application with <code class="docutils literal notranslate"><span class="pre">make</span></code>, and run it with <code class="docutils literal notranslate"><span class="pre">openapp</span> <span class="pre">./Money.app</span></code>.</p>
<p>Once the application starts up, you will see only the menu. Use
“Document→New” to open a new document. A empty window will show up.
You can keep as many documents as you want. The menu items will be
automatically enabled depending on the existance of the document. Most
menu doesn’t work yet.</p>
<p>GNUstep offers a great framework for document-based applications. With GNUstep, we only need to focus on the document itself, and don’t need to
worry about how to manage the multiple documents/windows. GNUstep will
handle it perfectly.</p>
</section>
</section>
<hr class="docutils" />
<section id="document-editor">
<h1>4.2 - Document Editor<a class="headerlink" href="#document-editor" title="Permalink to this heading">#</a></h1>
<p>We now have the skeleton of <em>Money.app</em>. I want it be a
spreadsheet-like application to track the expense.
Spreadsheet-like applications need a table. <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> is a good start.
<code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> is a more complicated user interface than NSButton,
NSTextField, etc. So do NSBrowser, NSOutlineView, NSMatrix, etc. GNUstep
does a great job to make it very easy to use. I’ll try to explain it
step by step.</p>
<blockquote>
<div><p>Here is a related article: <a class="reference external" href="http://cocoadevcentral.com/articles/000063.php"><em>Getting Started With
<code class="docutils literal notranslate"><span class="pre">NSTableView</span></code></em></a></p>
</div></blockquote>
<blockquote>
<div><p>If you are interested
in text editors, <a class="reference external" href="https://github.com/gnustep/tests-examples/tree/master/gui/Ink">Ink.app</a> is a good example.</p>
</div></blockquote>
<section id="creating-the-table-view">
<h2>Creating the table view<a class="headerlink" href="#creating-the-table-view" title="Permalink to this heading">#</a></h2>
<p>Use Gorm to open Document.gorm. Add a table view into the window. Try to
resize it until it fit the whole window.</p>
<p><span id="AEN996"></span></p>
<p><strong>Figure 4-38. Add table into window</strong></p>
<p><img alt="" src="../../../_images/Table-02.jpg" /></p>
<p><img alt="" src="../../../_images/Table-01.jpg" /></p>
<p>Check the “Horizontal” scroller.</p>
<p><span id="AEN1005"></span></p>
<p><strong>Figure 4-39. Attributes of <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code></strong></p>
<p><img alt="" src="../../../_images/Table-03.jpg" /></p>
<p>Look at the <u>Size</u> panel in the inspector of <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. Click the line in
the <u>Autosizing</u> box to make them springs.</p>
<p><span id="AEN1011"></span></p>
<p><strong>Figure 4-40. Set resize attribute of table view</strong></p>
<p><img alt="" src="../../../_images/Table-04.jpg" /></p>
<p>The box represent the <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. The straight line or spring represent
the distance relationship. Line outside the box is the distance between
<code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> and its superview. It is the window in this case. The line
inside the box is the size of the <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. Straight line means the
distance is fixed, the spring means it is resizable. In this case, when
window is resized, since the distance between <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> and window is
fixed, <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> will be resized according to the window. That’s the
behavior I want.</p>
<p>You can change the title of the column by double-click on it. But it is
not necessary for now. You will find that it is still hard to control
the interface of <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> from Gorm. I’ll do that programmingly.
Therefore, I need a outlet connected to this <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> from NSOwner.</p>
<p>Add an outlet, <code class="docutils literal notranslate"><span class="pre">tableView</span></code>, in the class <code class="docutils literal notranslate"><span class="pre">Document</span></code>.</p>
<p><span id="AEN1019"></span></p>
<p><strong>Figure 4-41. Add outlet for table view</strong></p>
<p><img alt="" src="../../../_images/Table-05.jpg" /></p>
<p>Set NSOwner as the data source and delegate of the <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. I’ll
explain the data source later.</p>
<p><span id="AEN1025"></span></p>
<p><strong>Figure 4-42. Connect data source and delegate of table view</strong></p>
<p><img alt="" src="../../../_images/Table-06.jpg" /></p>
<p><img alt="" src="../../../_images/Table-07.jpg" /></p>
<p><img alt="" src="../../../_images/Table-08.jpg" /></p>
<p>Connect the outlet <code class="docutils literal notranslate"><span class="pre">tableView</span></code> to <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>.</p>
<p><span id="AEN1037"></span></p>
<p><strong>Figure 4-43. Connect outlet to table view</strong></p>
<p><img alt="" src="../../../_images/Table-09.jpg" /></p>
<p><img alt="" src="../../../_images/Table-10.jpg" /></p>
<p><img alt="" src="../../../_images/Table-11.jpg" /></p>
<p>Save the Gorm file and quit Gorm.</p>
</section>
<section id="basic-data-source">
<h2>Basic data source<a class="headerlink" href="#basic-data-source" title="Permalink to this heading">#</a></h2>
<p>Add the new outlet in Document.h.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.h:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &lt;AppKit/AppKit.h&gt;</span>
<span class="cp">#import &lt;AppKit/NSDocument.h&gt;</span>

<span class="k">@interface</span> <span class="nc">Document</span> : <span class="nc">NSDocument</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">id</span><span class="w"> </span><span class="n">tableView</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
<p>The way <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> works is that when it needs to display, it will ask
its data source to provide the data it needs. So we need to implement
two methods to provide <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> the data it need:</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="nf">numberOfRowsInTableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span>              <span class="nf">tableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span>
<span class="w">    </span><span class="nl">objectValueForTableColumn</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableColumn</span><span class="o">*</span><span class="p">)</span> <span class="nv">column</span>
<span class="w">                          </span><span class="nl">row</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="nv">row</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="bp">NSString</span><span class="w"> </span><span class="n">stringWithFormat</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;column %@ row %d&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">        </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">identifier</span><span class="p">],</span><span class="w"> </span><span class="n">row</span><span class="p">];</span><span class="w"> </span>
<span class="p">}</span>
</pre></div>
</div>
<p>The method <code class="docutils literal notranslate"><span class="pre">-numberOfRowsInTableView:</span></code> returns how many rows <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>
should display – in this case, we’ll display 5 rows. The method
<code class="docutils literal notranslate"><span class="pre">-tableView:objectValueForTableColumn:row:</span></code> returns the value shown in a certain cell in the table.</p>
<p>Now, this application is ready to run, even though it does nothing but
display 5 rows of “column 0 row 0”. This is merely a demonstration of how <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>
works. I provide the number of rows, and the object in a given column
and row. As long as these two kinds of data are provided, the
<code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> can display anything, even a image in the cell. I’ll talk
about more details about data sources later on.</p>
<blockquote>
<div><p>Here is the source code:
<a class="reference external" href="http://gnustep.made-it.com/GSPT/Table/Table-1-src.tar.gz">Table-1-src.tar.gz</a></p>
</div></blockquote>
</section>
<section id="configuring-the-table-view">
<h2>Configuring the table view<a class="headerlink" href="#configuring-the-table-view" title="Permalink to this heading">#</a></h2>
<p>Let’s work on the interface first. <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> is a collection of
<code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code>s. I want three columns for the date, item and amount. By default, there are two columns. Therefore, I need to add a
<code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code> into our <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">windowControllerDidLoadNib:</span><span class="w"> </span><span class="p">(</span><span class="n">NSWindowController</span><span class="o">*</span><span class="p">)</span> <span class="nv">controller</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">NSTableColumn</span><span class="w"> </span><span class="o">*</span><span class="n">column</span><span class="p">;</span>
<span class="w">    </span><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">tableColumns</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">columns</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">NO</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;date&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Date&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">columns</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">NO</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;item&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Item&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">NSTableColumn</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">initWithIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;amount&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">NO</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Amount&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">addTableColumn</span><span class="o">:</span><span class="w"> </span><span class="n">column</span><span class="p">];</span>
<span class="w">    </span><span class="n">RELEASE</span><span class="p">(</span><span class="n">column</span><span class="p">);</span>

<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">sizeLastColumnToFit</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">setAutoresizesAllColumnsToFit</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We adjust the interface of our <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> in the method
<code class="docutils literal notranslate"><span class="pre">-windowControllerDidLoadNib</span></code>:, which guarantees that the Gorm file is
loaded. This is similar to <code class="docutils literal notranslate"><span class="pre">-awakeFromNib</span></code>. First, we get the existing
columns and change their properties. Second, we create a new <code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code>
and add it into our <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. Finally, we adjust the layout of our
<code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. This way, we can programatically adjust our <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> without using Gorm to adjust it. Run this application
again, and you will see the new column.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At the time this tutorial was originnally written, Gorm did not allow you to configure <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>.</p>
</div>
<p>An important property of <code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code> is its identifier. Each
<code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code> has an unique identifier to distinguish them.
The identifier can be any object, but it’s usually an <code class="docutils literal notranslate"><span class="pre">NSString</span></code>. The
identifier does not have to be the same as the header of the column, but
should being the same for easier management. So we access the
<code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code> via its identifier. Many GNUstep objects have identifiers.</p>
</section>
<section id="functional-data-source">
<h2>Functional data source<a class="headerlink" href="#functional-data-source" title="Permalink to this heading">#</a></h2>
<p>Now that we’ve finished the interface, we can set up a data source. The data source is an
object which provides the data for <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. Therefore, the data source is
the model in the <a class="reference external" href="http://cocoadevcentral.com/articles/000003.php">MVC (Model-View-Controller)
paradigm</a>. Depending on
the behavior of <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>, we need to implement the proper methods in
the data source of <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. We already implemented those methods, but they give the useless “column 0 row 0” messages, instead of useful data from our “Money Document”.</p>
<p>The data for <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> can be considered as an <code class="docutils literal notranslate"><span class="pre">NSArray</span></code> of
<code class="docutils literal notranslate"><span class="pre">NSDictionary</span></code>s. The object in each index of <code class="docutils literal notranslate"><span class="pre">NSArray</span></code> corresponds to each
row of <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. And the object of each <code class="docutils literal notranslate"><span class="pre">NSDictionary</span></code> with a given key
corresponds to each <code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code> with a given identifier. That’s the
simplest way to build the model for <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. Therefore, I add an
<code class="docutils literal notranslate"><span class="pre">NSMutableArray</span></code> in Document class.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.h:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#import &lt;AppKit/AppKit.h&gt;</span>
<span class="cp">#import &lt;AppKit/NSDocument.h&gt;</span>

<span class="k">@interface</span> <span class="nc">Document</span> : <span class="nc">NSDocument</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">id</span><span class="w"> </span><span class="n">tableView</span><span class="p">;</span>
<span class="w">    </span><span class="bp">NSMutableArray</span><span class="o">*</span><span class="w"> </span><span class="n">records</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
<p>The “records” will store the data of <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. For more information about the usage of
<code class="docutils literal notranslate"><span class="pre">NSMutableArray</span></code>, read <a class="reference external" href="http://www.gnustep.it/nicola/Tutorials/BasicClasses/"><em>Basic GNUstep Base Library
Classes</em></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span> <span class="nf">init</span>
<span class="p">{</span>
<span class="w">    </span><span class="nb">self</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">init</span><span class="p">];</span>
<span class="w">    </span><span class="n">records</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="bp">NSMutableArray</span><span class="w"> </span><span class="n">new</span><span class="p">];</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">self</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">dealloc</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">RELEASE</span><span class="p">(</span><span class="n">records</span><span class="p">);</span>
<span class="w">    </span><span class="p">[</span><span class="nb">super</span><span class="w"> </span><span class="n">dealloc</span><span class="p">];</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="nf">numberOfRowsInTableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">count</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span>              <span class="nf">tableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span>
<span class="w">    </span><span class="nl">objectValueForTableColumn</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableColumn</span><span class="o">*</span><span class="p">)</span> <span class="nv">column</span>
<span class="w">                          </span><span class="nl">row</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="nv">row</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">row</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">count</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">@&quot;&quot;</span><span class="p">;</span><span class="w"> </span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">[[</span><span class="n">records</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="n">row</span><span class="p">]</span><span class="w"> </span>
<span class="w">                          </span><span class="nl">objectForKey</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">identifier</span><span class="p">]];</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>We create the instance of <code class="docutils literal notranslate"><span class="pre">NSMutableArray</span></code> in the method <code class="docutils literal notranslate"><span class="pre">-init</span></code>, and release it
in <code class="docutils literal notranslate"><span class="pre">-dealloc</span></code>, which will destroy it if no other object needs it. In the method <code class="docutils literal notranslate"><span class="pre">-numberOfRowsInTableView:</span></code>, we return one plus the amount of records because we want it to display an extra empty row for the user to add new records. Hence, in the
method <code class="docutils literal notranslate"><span class="pre">-tableView:objectValueForTableColumn:row:</span></code>, I have to check
whether the row the <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> requests is larger than the number of actual records. If so, it is a request for data to show in the empty row. Therefore, we just return an empty string (<code class="docutils literal notranslate"><span class="pre">&#64;&quot;&quot;</span></code>). We are using an array of dictionaries to make the key
of the dictionary the same as the identifier of the <code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code>. So I can
get the object directly by knowing the identifier of <code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code>. If
you are not using an <code class="docutils literal notranslate"><span class="pre">NSDictionary</span></code> for each row, you can consider
<a class="reference external" href="http://developer.apple.com/techpubs/macosx/Cocoa/TasksAndConcepts/ProgrammingTopics/KeyValueCoding/index.html"><em>Key Value Coding
(KVC)</em></a>,
which offers a similar way to get the right object. Otherwise, you have to
use <code class="docutils literal notranslate"><span class="pre">if</span></code>-<code class="docutils literal notranslate"><span class="pre">else</span></code> to get the right object. The advantage of NSDictionary (or
KVC) will be more clear for data input.</p>
</section>
<section id="data-input">
<h2>Data input<a class="headerlink" href="#data-input" title="Permalink to this heading">#</a></h2>
<p>Now, we’ll add the functionary of data input. First, we have to set the
<code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code> to editable.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">windowControllerDidLoadNib:</span><span class="w"> </span><span class="p">(</span><span class="n">NSWindowController</span><span class="o">*</span><span class="p">)</span> <span class="nv">controller</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">NSTableColumn</span><span class="w"> </span><span class="o">*</span><span class="n">column</span><span class="p">;</span>
<span class="w">    </span><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">tableColumns</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">columns</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;date&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Date&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">columns</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;item&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Item&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">NSTableColumn</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">initWithIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;amount&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Amount&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">addTableColumn</span><span class="o">:</span><span class="w"> </span><span class="n">column</span><span class="p">];</span>
<span class="w">    </span><span class="n">RELEASE</span><span class="p">(</span><span class="n">column</span><span class="p">);</span>

<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">sizeLastColumnToFit</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">setAutoresizesAllColumnsToFit</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When the user double-clicks a cell, the user can edit the contents of the cell. When the user finishes, the table view will send <code class="docutils literal notranslate"><span class="pre">-tableView:setObjectValue:forTableColumn:row:</span></code> to the data source.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span>      <span class="nf">tableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span>
<span class="w">         </span><span class="nl">setObjectValue</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">id</span><span class="p">)</span> <span class="nv">object</span>
<span class="w">         </span><span class="nl">forTableColumn</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableColumn</span><span class="o">*</span><span class="p">)</span> <span class="nv">column</span>
<span class="w">                    </span><span class="nl">row</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="nv">row</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">row</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">count</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">addObject</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="bp">NSMutableDictionary</span><span class="w"> </span><span class="n">new</span><span class="p">]];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="p">[[</span><span class="n">records</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="n">row</span><span class="p">]</span><span class="w"> </span><span class="n">setObject</span><span class="o">:</span><span class="w"> </span><span class="n">object</span>
<span class="w">                                     </span><span class="nl">forKey</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">identifier</span><span class="p">]];</span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">reloadData</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Again, we need to take care of the special situation where user input in the last
empty row. Since it is not in the records, I need to add a new
dictionary item to the records, to represent a new row. Whenever the user inputs the data, it will be
store into records according its row and the identifier of the column. And
the key in the dictionary is the same as the identifier of the <code class="docutils literal notranslate"><span class="pre">NSTableColumn</span></code>.
Hence I can retrieve the data according to the identifier of the column.
Finally I ask the <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> to reload the data in order to reflect the
change of data source.</p>
<p>Now you can play around this application and input the data.</p>
<blockquote>
<div><p>Here is the
source code:
<a class="reference external" href="http://gnustep.made-it.com/GSPT/Table/Table-2-src.tar.gz">Table-2-src.tar.gz</a>.</p>
</div></blockquote>
<p>This example shows how easy it is to make a real document-based application
without worrying about the management of multiple documents and windows.</p>
</section>
</section>
<hr class="docutils" />
<section id="load-and-save">
<h1>4.3 - Load and Save<a class="headerlink" href="#load-and-save" title="Permalink to this heading">#</a></h1>
<p>As a document-based application, <em>Money.app</em> has to be able to load and save files. Otherwise, the user will lose their work when they quit the application.
Depending on the structure of the files, I have several choices to
override in <code class="docutils literal notranslate"><span class="pre">NSDocument</span></code>:</p>
<p><span id="AEN1102"></span></p>
<p><strong>Table 4-1. Methods for loading and saving files</strong></p>
<table>
<tbody>
<tr>
<td> </td>
<td>Load file</td>
<td>Save file</td>
</tr>
<tr>
<td>Single file</td>
<td>loadDataRepresentation:ofType:</td>
<td>dataRepresentationOfType:</td>
</tr>
<tr>
<td>Bundle</td>
<td>loadFileWrapperRepresentation:ofType:</td>
<td>fileWrapperRepresentationOfType:</td>
</tr>
<tr>
<td>Low level</td>
<td>readFromFile:ofType:, readFromURL:ofType:</td>
<td>writeToFile:ofType:, writeToURL:ofType:</td>
</tr>
</tbody>
</table>
<p>Read <a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/Conceptual/Documents/Tasks/FAQ.html#//apple_ref/doc/uid/20000954/BAJBFGAG"><em>How do I implement saving and loading for simple
files?</em></a>,
<a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/Conceptual/Documents/Tasks/FAQ.html#//apple_ref/doc/uid/20000954/BAJHBHGJ"><em>How do I implement document packages (documents that are really
folders, but appear to be opaque
documents)?</em></a>,
and <a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/Conceptual/Documents/Tasks/FAQ.html#//apple_ref/doc/uid/20000954/BAJIGEFI"><em>How do I implement loading and saving when the simple data or file
wrapper API won’t
do?</em></a>. (Don’t open all the links at once – they’re all on the same FAQ page.)</p>
<p>In this case, <code class="docutils literal notranslate"><span class="pre">-loadDataRepresentation:ofType:</span></code> and
<code class="docutils literal notranslate"><span class="pre">-dataRepresentationOfType:</span></code> are enough.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="bp">NSData</span><span class="o">*</span><span class="p">)</span> <span class="nf">dataRepresentationOfType:</span><span class="w"> </span><span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span> <span class="nv">type</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">nil</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">@&quot;mon&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="n">type</span><span class="w"> </span><span class="n">isEqualToString</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;mon&quot;</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="n">NSArchiver</span><span class="w"> </span><span class="n">archivedDataWithRootObject</span><span class="o">:</span><span class="w"> </span><span class="n">records</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">nil</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span> <span class="nf">loadDataRepresentation:</span><span class="w"> </span><span class="p">(</span><span class="bp">NSData</span><span class="o">*</span><span class="p">)</span> <span class="nv">data</span><span class="w"> </span><span class="nf">ofType:</span><span class="w"> </span><span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span> <span class="nv">type</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="n">type</span><span class="w"> </span><span class="n">isEqualToString</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;mon&quot;</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">setArray</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="n">NSUnarchiver</span><span class="w"> </span><span class="n">unarchiveObjectWithData</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">]];</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When the user saves the document, <code class="docutils literal notranslate"><span class="pre">Document</span></code> will recieve
<code class="docutils literal notranslate"><span class="pre">-dataRepresentationOfType:</span></code>. The type will be the <code class="docutils literal notranslate"><span class="pre">NSName</span></code> of the <code class="docutils literal notranslate"><span class="pre">NSType</span></code> in the property
list of this application (<code class="docutils literal notranslate"><span class="pre">MoneyInfo.plist</span></code>), which is <code class="docutils literal notranslate"><span class="pre">mon</span></code>. Here, we use <code class="docutils literal notranslate"><span class="pre">NSArchiver</span></code> to
transform the whole <code class="docutils literal notranslate"><span class="pre">NSArray</span></code> into <code class="docutils literal notranslate"><span class="pre">NSData</span></code>, and we don’t need to worry about
the format of the file. When document is going to be loaded, it will call
<code class="docutils literal notranslate"><span class="pre">-loadDataRepresentation:ofType:</span></code>. We use <code class="docutils literal notranslate"><span class="pre">NSUnarchiver</span></code> to transform
the <code class="docutils literal notranslate"><span class="pre">NSData</span></code> into <code class="docutils literal notranslate"><span class="pre">NSArray</span></code>. That’s all. If you are using your own data
structure, you have to deal with <a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/TasksAndConcepts/ProgrammingTopics/Archiving/index.html"><em>data
archives</em></a>
by yourself.</p>
<blockquote>
<div><p>Here is a related article: <a class="reference external" href="http://cocoadevcentral.com/articles/000059.php"><em>Using the Property List
Objects and the NSCoding
Protocol</em></a>.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you’ve ever used Python’s <code class="docutils literal notranslate"><span class="pre">pickle</span></code>, <code class="docutils literal notranslate"><span class="pre">NSArchiver</span></code> is similar, but doesn’t have the problem that pickles actually contain commands that are executed. <code class="docutils literal notranslate"><span class="pre">NSArchiver</span></code> simply represents the data itself as a binary file, not as a list of commands to piece together the data like <code class="docutils literal notranslate"><span class="pre">pickle</span></code> does.</p>
</div>
<p>The saved data is in binary format, which is usually undesired. Since we
only use the basic data structure, we could save it into an OpenStep-style property list,
which is human-readable.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="bp">NSData</span><span class="o">*</span><span class="p">)</span> <span class="nf">dataRepresentationOfType:</span><span class="w"> </span><span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span> <span class="nv">type</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">nil</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">@&quot;mon&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="n">type</span><span class="w"> </span><span class="n">isEqualToString</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;mon&quot;</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">[[</span><span class="n">records</span><span class="w"> </span><span class="n">description</span><span class="p">]</span><span class="w"> </span>
<span class="w">            </span><span class="nl">dataUsingEncoding</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="bp">NSString</span><span class="w"> </span><span class="n">defaultCStringEncoding</span><span class="p">]];</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">nil</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span> <span class="nf">loadDataRepresentation:</span><span class="w"> </span><span class="p">(</span><span class="bp">NSData</span><span class="o">*</span><span class="p">)</span> <span class="nv">data</span><span class="w"> </span><span class="nf">ofType:</span><span class="w"> </span><span class="p">(</span><span class="bp">NSString</span><span class="o">*</span><span class="p">)</span> <span class="nv">type</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">([</span><span class="n">type</span><span class="w"> </span><span class="n">isEqualToString</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;mon&quot;</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">NSString</span><span class="w"> </span><span class="o">*</span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="bp">NSString</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span>
<span class="w">            </span><span class="nl">initWithData</span><span class="p">:</span><span class="w"> </span><span class="n">data</span><span class="w"> </span>
<span class="w">                </span><span class="nl">encoding</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="bp">NSString</span><span class="w"> </span><span class="n">defaultCStringEncoding</span><span class="p">]];</span>
<span class="w">        </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">setArray</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="n">string</span><span class="w"> </span><span class="n">propertyList</span><span class="p">]];</span>
<span class="w">        </span><span class="n">RELEASE</span><span class="p">(</span><span class="n">string</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>I use -description to get the property list, which is NSString. Then use
-dataUsingEncoding to transform property list (NSString) into NSData for
saving. And do the opposite for the loading. Now, you can look at the
saved file, which is very easy to read.</p>
<blockquote>
<div><p>Here is the source code for the easy-read version:
<a class="reference external" href="http://gnustep.made-it.com/GSPT/LoadSave/LoadSave-src.tar.gz">LoadSave-src.tar.gz</a>.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On macOS, this will save as an XML or binary property list, since macOS no longer uses OpenStep-style property lists.</p>
</div>
<p>If you are saving the document into a directory, such as if your app saves rich text documents with images, you may want to use
<code class="docutils literal notranslate"><span class="pre">-loadFileWrapperRepresentation:ofType:</span></code> and
<code class="docutils literal notranslate"><span class="pre">-fileWrapperRepresentationOfType:</span></code>. The methods <code class="docutils literal notranslate"><span class="pre">-readFromFile:ofType:</span></code> and
<code class="docutils literal notranslate"><span class="pre">-writeToFile:ofType:</span></code> offer the ability to access the file system
directly.</p>
</section>
<hr class="docutils" />
<section id="drag-and-drop">
<h1>4.4 - Drag and Drop<a class="headerlink" href="#drag-and-drop" title="Permalink to this heading">#</a></h1>
<p><a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/TasksAndConcepts/ProgrammingTopics/DragandDrop/index.html"><em>Drag and drop in
general</em></a>
is easy, but even easier in <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. Here is an article about it:
<a class="reference external" href="http://cocoadevcentral.com/articles/000056.php"><em>Drag and Drop
Destinations</em></a>.
Basically, drag and drop is copy and paste with graphic interactivity.
Therefore, it involves the pasteboard. I’ll add the fuction of drag and
drop in this tutorial so that you can drag and drop in-between different
document. <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> has its built-in drag and drop support. Therefore,
it is sort of different from drag and drop in general. Here is the
<a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/TasksAndConcepts/ProgrammingTopics/TableView/Tasks/UsingDragAndDrop.html"><em>drag and drop in <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> from
Cocoa</em></a>.</p>
<p>Firstly, I need to set up the dragging source, the source you can drag
something out. I need to register the table as dragging source, and
implement one method.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">windowControllerDidLoadNib:</span><span class="w"> </span><span class="p">(</span><span class="n">NSWindowController</span><span class="o">*</span><span class="p">)</span> <span class="nv">controller</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">NSTableColumn</span><span class="w"> </span><span class="o">*</span><span class="n">column</span><span class="p">;</span>
<span class="w">    </span><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="n">columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">tableColumns</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">columns</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;date&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Date&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">columns</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;item&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Item&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="n">column</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="n">NSTableColumn</span><span class="w"> </span><span class="n">alloc</span><span class="p">]</span><span class="w"> </span><span class="n">initWithIdentifier</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;amount&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setEditable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">column</span><span class="w"> </span><span class="n">setResizable</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span><span class="p">[[</span><span class="n">column</span><span class="w"> </span><span class="n">headerCell</span><span class="p">]</span><span class="w"> </span><span class="n">setStringValue</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;Amount&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">addTableColumn</span><span class="o">:</span><span class="w"> </span><span class="n">column</span><span class="p">];</span>
<span class="w">    </span><span class="n">RELEASE</span><span class="p">(</span><span class="n">column</span><span class="p">);</span>

<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">sizeLastColumnToFit</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">setAutoresizesAllColumnsToFit</span><span class="o">:</span><span class="w"> </span><span class="nb">YES</span><span class="p">];</span>
<span class="w">    </span>
<span class="w">    </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">registerForDraggedTypes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="bp">NSArray</span><span class="w"> </span><span class="n">arrayWithObjects</span><span class="o">:</span><span class="w"> </span><span class="n">NSGeneralPboardType</span><span class="p">,</span><span class="w"> </span><span class="nb">nil</span><span class="p">]];</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span> <span class="nf">tableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span>
<span class="w">         </span><span class="nl">writeRows</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="bp">NSArray</span><span class="w"> </span><span class="o">*</span><span class="p">)</span> <span class="nv">rows</span>
<span class="w">      </span><span class="nl">toPasteboard</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">NSPasteboard</span><span class="w"> </span><span class="o">*</span><span class="p">)</span> <span class="nv">pboard</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">id</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">objectAtIndex</span><span class="o">:</span><span class="w"> </span><span class="p">[[</span><span class="n">rows</span><span class="w"> </span><span class="n">lastObject</span><span class="p">]</span><span class="w"> </span><span class="n">intValue</span><span class="p">]];</span>
<span class="w">    </span><span class="bp">NSData</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">NSArchiver</span><span class="w"> </span><span class="n">archivedDataWithRootObject</span><span class="o">:</span><span class="w"> </span><span class="n">object</span><span class="p">];</span>

<span class="w">    </span><span class="p">[</span><span class="n">pboard</span><span class="w"> </span><span class="n">declareTypes</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="bp">NSArray</span><span class="w"> </span><span class="n">arrayWithObject</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;NSGeneralPboardType&quot;</span><span class="p">]</span>
<span class="w">                                             </span><span class="nl">owner</span><span class="p">:</span><span class="w"> </span><span class="nb">nil</span><span class="p">];</span>
<span class="w">    </span><span class="p">[</span><span class="n">pboard</span><span class="w"> </span><span class="n">setData</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">forType</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;NSGeneralPboardType&quot;</span><span class="p">];</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In method -windowControllerDidLoadNib:, <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> register what kind
of pasteboard it will use. Once it registers, it is ready to drag and
drop. The <a class="reference external" href="https://web.archive.org/web/2004if_/http://developer.apple.com/documentation/Cocoa/TasksAndConcepts/ProgrammingTopics/CopyandPaste/index.html"><em>usage of
pasteboard</em></a>
is not covered in this tutorial. Basically, you set the type of
pasteboard, put data in, and take it out.</p>
<p>Method -tableView:writeRows:toPasteboard will be called when user try to
drag some rows out of the table, It is the methods in the data source of
table, not in the delegate of table. Therefore, in this method, I only
need to put the data into pasteboard. Since this table only allow single
selection, I only need to handle the data in one row, which is a
NSDictionary. I archive NSDictionary into NSData, put it into pasteboard
of NSGeneralPboardType, then return YES. Now, you can drag the row out
of the table.</p>
<p><code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> will handle all the graphic interactivity. When users drop
the data into another document, I need to implement two methods.</p>
<p><code class="docutils literal notranslate"><span class="pre">Document.m:</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="n">NSDragOperation</span><span class="p">)</span> <span class="nf">tableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span>
<span class="w">                 </span><span class="nl">validateDrop</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">id</span><span class="o">&lt;</span><span class="n">NSDraggingInfo</span><span class="o">&gt;</span><span class="p">)</span> <span class="nv">info</span>
<span class="w">                  </span><span class="nl">proposedRow</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="nv">row</span>
<span class="w">        </span><span class="nl">proposedDropOperation</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableViewDropOperation</span><span class="p">)</span> <span class="nv">operation</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">row</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">count</span><span class="p">])</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">NSDragOperationNone</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">nil</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[</span><span class="n">info</span><span class="w"> </span><span class="n">draggingSource</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From other application</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">NSDragOperationNone</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tableView</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[</span><span class="n">info</span><span class="w"> </span><span class="n">draggingSource</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From self</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">NSDragOperationNone</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From other documents </span>
<span class="w">        </span><span class="p">[</span><span class="n">view</span><span class="w"> </span><span class="n">setDropRow</span><span class="o">:</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="n">dropOperation</span><span class="o">:</span><span class="w"> </span><span class="n">NSTableViewDropAbove</span><span class="p">];</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">NSDragOperationCopy</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span> <span class="nf">tableView:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableView</span><span class="o">*</span><span class="p">)</span> <span class="nv">view</span>
<span class="w">        </span><span class="nl">acceptDrop</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">id</span><span class="o">&lt;</span><span class="n">NSDraggingInfo</span><span class="o">&gt;</span><span class="p">)</span> <span class="nv">info</span>
<span class="w">               </span><span class="nl">row</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="nv">row</span>
<span class="w">     </span><span class="nl">dropOperation</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">NSTableViewDropOperation</span><span class="p">)</span> <span class="nv">operation</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">NSPasteboard</span><span class="w"> </span><span class="o">*</span><span class="n">pboard</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">info</span><span class="w"> </span><span class="n">draggingPasteboard</span><span class="p">];</span>
<span class="w">    </span><span class="bp">NSData</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">pboard</span><span class="w"> </span><span class="n">dataForType</span><span class="o">:</span><span class="w"> </span><span class="s">@&quot;NSGeneralPboardType&quot;</span><span class="p">];</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">row</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">count</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">nil</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[</span><span class="n">info</span><span class="w"> </span><span class="n">draggingSource</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From other application</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">tableView</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">[</span><span class="n">info</span><span class="w"> </span><span class="n">draggingSource</span><span class="p">])</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From self</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// From other documents</span>
<span class="w">        </span><span class="kt">id</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">NSUnarchiver</span><span class="w"> </span><span class="n">unarchiveObjectWithData</span><span class="o">:</span><span class="w"> </span><span class="n">data</span><span class="p">];</span>
<span class="w">        </span><span class="p">[</span><span class="n">records</span><span class="w"> </span><span class="n">insertObject</span><span class="o">:</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">atIndex</span><span class="o">:</span><span class="w"> </span><span class="n">row</span><span class="p">];</span>
<span class="w">        </span><span class="p">[</span><span class="n">tableView</span><span class="w"> </span><span class="n">reloadData</span><span class="p">];</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">YES</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When users hold the mouse button and move above the table, the table
will keep receiving the call for method
-tableView:validateDrop:proposedRow:ProposedDropOperation:. The only
thing I need to do in this method is to examine the proposed drop and
return the action I can accept. If the source is not from other
documents, return NSDragOperationNone to indicate that this table
doesn’t accept drop. Otherwise, return NSDragOperationCopy to indicate
that this table accept copy. In table, you can drop between rows or over
rows. That’s NSTableViewDropOperation means. I only want to insert the
data. When it is proposed to drop, I change the propose by
-setDropRow:dropOperation:. By this way, I can change all the drop
in-between rows, not over rows. So this method gives the table chances
to change its interface when mouse is moving above it.</p>
<p>Once users release the mouse button, method
-tableView:acceptDrop:row:dropOperation: will be called. I get the
dropped data from this method. Extract the data from pbastebord,
unarchive into NSDictionary, and add into records. Don’t forget to
reload the table to reflect the change.</p>
<p><code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> offers the basic fuction of drag and drop, which is useful
for general applications. If you want more support for drag and drop,
you have to subclass <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> and write your own using the general
drag and drop support of GNUstep. For example, <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code> doesn’t
support drag and drop from other application. If you want to do that,
you have to subclass <code class="docutils literal notranslate"><span class="pre">NSTableView</span></code>. I’ll talk about the drag and drop in
general later.</p>
<p>Here is the source code:
<a class="reference external" href="http://gnustep.made-it.com/GSPT/DragDropInTable/DragDropInTable-src.tar.gz">DragDropInTable-src.tar.gz</a></p>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">4 - Money</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#topics">Topics</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#the-basics">4.1 - The Basics</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#skeleton-user-interface">Skeleton user interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loading-the-user-interface">Loading the user interface</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#document-editor">4.2 - Document Editor</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-the-table-view">Creating the table view</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-data-source">Basic data source</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-the-table-view">Configuring the table view</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functional-data-source">Functional data source</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-input">Data input</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#load-and-save">4.3 - Load and Save</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#drag-and-drop">4.4 - Drag and Drop</a></li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../../_sources/Guides/App/4_Money/AllInOne.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, GNUstep contributors.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>