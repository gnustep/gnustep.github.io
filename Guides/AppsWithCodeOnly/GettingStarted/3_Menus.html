
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3 - Menus &#8212; GNUstep</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Guides/AppsWithCodeOnly/GettingStarted/3_Menus';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="4 - Points, Sizes and Rectangles" href="4_PointsSizesRectangles.html" />
    <link rel="prev" title="2 - Setting your application’s icon" href="2_AppIcon.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">GNUstep</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../Manuals/index.html">
    Manuals
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../APIRefs/index.html">
    API references
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../About/index.html">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../Showcase/index.html">
    Showcase
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    Guides
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../Manuals/index.html">
    Manuals
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../APIRefs/index.html">
    API references
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../About/index.html">
    About
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../Showcase/index.html">
    Showcase
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../Setup/index.html">Installation and Setup</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../Setup/Linux/index.html">Linux</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Setup/Linux/building-linux.html">Building on Linux</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../Setup/Windows/index.html">Windows</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Setup/Windows/sdk-setup.html">SDK/Environment setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Setup/Windows/installing-windows-msvc.html">Installing the GNUstep MSVC toolchain on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Setup/Windows/using-windows-msvc-msys2.html">Using the GNUstep MSVC toolchain from MSYS2</a></li>

<li class="toctree-l3"><a class="reference internal" href="../../Setup/Windows/building-windows-msvc.html">Building on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Setup/Windows/ide-setup.html">IDE setup</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../App/index.html">Building Apps with GORM</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../App/1_Intro/index.html">1 - Introduction to GNUstep Programming</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../App/2_Convertor/index.html">2 - Convertor</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../App/2_Convertor/2.1.html">2.1 - Designing the UI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../App/2_Convertor/2.2.html">2.2 - Outlets and Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../App/2_Convertor/2.3.html">2.3 - Adding the Code</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../App/3_TimeMachine/index.html">3 - TimeMachine</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../App/3_TimeMachine/3.1.html">3.1 - A Basic Clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../App/3_TimeMachine/3.2.html">3.2 - Analog Clock</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../App/3_TimeMachine/3.3.html">3.3 - New Time Zone Dialog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../App/3_TimeMachine/3.4.html">3.4 - Multiple Clocks</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../App/4_Money/index.html">4 - Money</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../App/4_Money/4.1.html">4.1 - The Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../App/4_Money/4.2.html">4.2 - Document Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../App/4_Money/4.3.html">4.3 - Load and Save</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../App/4_Money/4.4.html">4.4 - Drag and Drop</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../App/5_Overview/index.html">5 - Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../App/6_LunarCalendar/index.html">6 - LunarCalendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../App/7_NSLookupService/index.html">7 - NSLookupService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../App/HelpfulWebsites.html">Helpful Websites</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">Building Apps from Code Only</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">First Steps in GNUstep GUI Programming</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="1_SharedApplication.html">1 - The shared application object</a></li>
<li class="toctree-l3"><a class="reference internal" href="2_AppIcon.html">2 - Setting your application’s icon</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">3 - Menus</a></li>
<li class="toctree-l3"><a class="reference internal" href="4_PointsSizesRectangles.html">4 - Points, Sizes and Rectangles</a></li>
<li class="toctree-l3"><a class="reference internal" href="5_Windows.html">5 - Adding a Window to your Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="6_Buttons.html">6 - Adding a Button in the Window</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">Guides</a></li>
    
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Building Apps from Code Only</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">First Steps in GNUstep GUI Programming</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">3 - Menus</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="menus">
<h1>3 - Menus<a class="headerlink" href="#menus" title="Link to this heading">#</a></h1>
<p>We are now going to add a menu to our tutorial application.</p>
<section id="creating-a-menu">
<h2>3.1 Creating a Menu<a class="headerlink" href="#creating-a-menu" title="Link to this heading">#</a></h2>
<p>An <code class="docutils literal notranslate"><span class="pre">NSMenu</span></code> object represents a menu. You create a new menu simply with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NSMenu *menu;

menu = AUTORELEASE ([NSMenu new]);
</pre></div>
</div>
<p>This is an empty menu. To add items to it, you do as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[menu addItemWithTitle: @&quot;Quit&quot; 
      action: @selector (terminate:)
      keyEquivalent: @&quot;q&quot;];
</pre></div>
</div>
<p>This adds to the <code class="docutils literal notranslate"><span class="pre">menu</span></code> menu an entry with title <code class="docutils literal notranslate"><span class="pre">Quit</span></code> (the title is the string which is displayed to the user). It’s interesting to know that the method</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>addItemWithTitle:action:keyEquivalent:
</pre></div>
</div>
<p>actually returns a <code class="docutils literal notranslate"><span class="pre">NSMenuItem</span></code> object, which is the menu item object which was added to the menu. We don’t need this return value in this example, so we discard it. Later on, we will need it.</p>
<hr class="docutils" />
<p><span id="CHILD_LINKS"><strong>Subsections</strong></span></p>
<ul class="simple">
<li><p><a href="node9.html" id="tex2html111">3.1.1 Action and Target</a></p></li>
</ul>
<hr class="docutils" />
<section id="action-and-target">
<h3>3.1.1 Action and Target<a class="headerlink" href="#action-and-target" title="Link to this heading">#</a></h3>
<p>A menu item behaves as most controls in the GNUstep gui library: it has an <em>action</em> and a <em>target</em>. The typical example of such a control is a button. Say, for example, that you have created a button called <code class="docutils literal notranslate"><span class="pre">myButton</span></code>. You want something to happen when the user clicks on the button - to do it, you need to specify an <em>action</em> and a <em>target</em> for the button. For example, if you want the method <code class="docutils literal notranslate"><span class="pre">terminate:</span></code> of <code class="docutils literal notranslate"><span class="pre">NSApp</span></code> (the application shared object) to be invoked when the user clicks the button, you do as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NSButton *myButton;
id myObject;

// &lt;missing code: create myButton, myObject etc&gt;

[myButton setAction: @selector (terminate:)];
[myButton setTarget: NSApp];
</pre></div>
</div>
<p>When the user presses <code class="docutils literal notranslate"><span class="pre">myButton</span></code>, the gui library sends the <code class="docutils literal notranslate"><span class="pre">terminate:</span></code> message to the object <code class="docutils literal notranslate"><span class="pre">NSApp</span></code>, passing as argument <code class="docutils literal notranslate"><span class="pre">myButton</span></code>, executing the equivalent of the following code:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[NSApp terminate: myButton];
</pre></div>
</div>
<p>This way, when the user clicks the button, the application quits.</p>
<p>The button which was clicked is passed as an argument to the <em>action</em> so that the receiving object can determine (if needed) which button was actually pressed, so that the same method may be used for more than one button. In our case, <code class="docutils literal notranslate"><span class="pre">NSApp</span></code> simply discards the argument of <code class="docutils literal notranslate"><span class="pre">terminate:</span></code>.</p>
<p>In brief, the <em>action</em> is the method to be invoked when the user clicks on the button; the <em>target</em> is the object on which to invoke the method. <em>action</em> should be a selector for a method returning <code class="docutils literal notranslate"><span class="pre">void</span></code> and taking a single argument (of type <code class="docutils literal notranslate"><span class="pre">id</span></code>, a generic object). The button which was clicked is passed as an argument to the invocation of <em>action</em> on the <em>target</em>.</p>
<p>The case of a menu item is completely similar. When the user selects this menu item, the gui library performs the menu item <em>action</em> (<code class="docutils literal notranslate"><span class="pre">terminate:</span></code> in this case) on the menu item <em>target</em>. The argument passed to <code class="docutils literal notranslate"><span class="pre">terminate:</span></code> is the menu item which was selected.</p>
<p>Usually, no target is specified for a menu item, as in our code</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[menu addItemWithTitle: @&quot;Quit&quot; 
      action: @selector (terminate:)
      keyEquivalent: @&quot;q&quot;];
</pre></div>
</div>
<p>which only specifies that the action is <code class="docutils literal notranslate"><span class="pre">terminate:</span></code>. When no target is specified, the gui library tries to determine an appropriate target dynamically at run-time. For now the only important thing to know is that the gui library will try to send the action to certain objects (roughly, the objects inside a window which have the input focus) and, failing these objects, it will try to send the action to <code class="docutils literal notranslate"><span class="pre">NSApp</span></code>, and as a last resort to <code class="docutils literal notranslate"><span class="pre">NSApp</span></code>’s delegate. In our example, we want the action <code class="docutils literal notranslate"><span class="pre">terminate:</span></code> to be sent to <code class="docutils literal notranslate"><span class="pre">NSApp</span></code> (thus terminating the application when the user selects the <code class="docutils literal notranslate"><span class="pre">Quit</span></code> menu item), so this automatic mechanism works just fine for us (actually, you will soon discover that this automatic mechanism works fine extremely often). So, we don’t need to set explicitly a target for our menu item.</p>
</section>
</section>
<hr class="docutils" />
<section id="setting-the-application-menu">
<h2>3.2 Setting the Application Menu<a class="headerlink" href="#setting-the-application-menu" title="Link to this heading">#</a></h2>
<p>Once you have created an <code class="docutils literal notranslate"><span class="pre">NSMenu</span></code> called, say, <code class="docutils literal notranslate"><span class="pre">myMenu</span></code>, to set it as the application menu you just invoke:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[NSApp setMainMenu: myMenu];
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="our-first-application">
<h2>3.3 Our First Application<a class="headerlink" href="#our-first-application" title="Link to this heading">#</a></h2>
<p>We are ready now to create our first gui application:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;Foundation/Foundation.h&gt;
#include &lt;AppKit/AppKit.h&gt;

@interface MyDelegate : NSObject
- (void) applicationWillFinishLaunching: (NSNotification *)not;
@end

@implementation MyDelegate : NSObject 
- (void) applicationWillFinishLaunching: (NSNotification *)not
{
  NSMenu *menu;
  
  menu = AUTORELEASE ([NSMenu new]);
  [menu addItemWithTitle: @&quot;Quit&quot;  
        action: @selector (terminate:)  
        keyEquivalent: @&quot;q&quot;];
  [NSApp setMainMenu: menu];
}
@end

int main (int argc, const char **argv)
{ 
  [NSApplication sharedApplication];
  [NSApp setDelegate: [MyDelegate new]];

  return NSApplicationMain (argc, argv);
}
</pre></div>
</div>
<p>Put this code for example into a file called <code class="docutils literal notranslate"><span class="pre">MyApp.m</span></code>, and use the following <code class="docutils literal notranslate"><span class="pre">GNUmakefile</span></code> for it:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>include $(GNUSTEP_MAKEFILES)/common.make

APP_NAME = MyFirstApp
MyFirstApp_OBJC_FILES = MyApp.m 

# Uncomment the following if you have an icon
#MyFirstApp_APPLICATION_ICON = MyApp.png
#MyFirstApp_RESOURCE_FILES = MyApp.png

include $(GNUSTEP_MAKEFILES)/application.make
</pre></div>
</div>
<p>Compile it, then run it using <code class="docutils literal notranslate"><span class="pre">openapp</span>&#160;&#160; <span class="pre">./MyFirstApplication.app</span></code> (see the GNUmakefile mini-tutorial for further information on writing GNUmakefiles).</p>
</section>
<hr class="docutils" />
<section id="fun-with-nsmenuitem-s-target">
<h2>3.4 Fun with NSMenuItem’s target<a class="headerlink" href="#fun-with-nsmenuitem-s-target" title="Link to this heading">#</a></h2>
<p>The next step in our tutorial is to add to the menu an item which prints <code class="docutils literal notranslate"><span class="pre">Hello!</span></code> to the user when the user selects the item.</p>
<p>So, we add a new menu item to our menu, invoking the <code class="docutils literal notranslate"><span class="pre">printHello:</span></code> action (which we’ll implement in our custom object):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[menu addItemWithTitle: @&quot;Print Hello&quot;  
      action: @selector (printHello:)  
      keyEquivalent: @&quot;h&quot;];
</pre></div>
</div>
<p>Since our custom object is the application’s delegate, we don’t need to set explicitly the target: the library can determine it at run-time. In other cases it could be necessary to set a different target, as in:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NSMenuItem *menuItem;
id myObject;

// &lt;missing code: create myObject etc&gt;

menuItem = [menu addItemWithTitle: @&quot;Print Hello&quot;  
                 action: @selector (printHello:)  
                 keyEquivalent: @&quot;h&quot;];
[menuItem setTarget: myObject];
</pre></div>
</div>
<p>But in this case, we don’t need to set the target explicitly, and the code is simply:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;Foundation/Foundation.h&gt;
#include &lt;AppKit/AppKit.h&gt;

@interface MyDelegate : NSObject
- (void) printHello: (id)sender;
- (void) applicationWillFinishLaunching: (NSNotification *)not;
@end

@implementation MyDelegate : NSObject 
- (void) printHello: (id)sender
{
  printf (&quot;Hello!\n&quot;);
}

- (void) applicationWillFinishLaunching: (NSNotification *)not
{
  NSMenu *menu;

  menu = AUTORELEASE ([NSMenu new]);

  [menu addItemWithTitle: @&quot;Print Hello&quot;  
        action: @selector (printHello:)  
        keyEquivalent: @&quot;&quot;];

  [menu addItemWithTitle: @&quot;Quit&quot;  
        action: @selector (terminate:)  
        keyEquivalent: @&quot;q&quot;];

  [NSApp setMainMenu: menu];
}
@end

int main (int argc, const char **argv)
{ 
  [NSApplication sharedApplication];
  [NSApp setDelegate: [MyDelegate new]];

  return NSApplicationMain (argc, argv);
}
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">GNUmakefile</span></code> is the same. I hope you appreciate how easy and simple is coding in GNUstep; I encourage you to try it out and enjoy all the fun you of selecting the <code class="docutils literal notranslate"><span class="pre">Print</span> <span class="pre">Hello</span></code> menu item and see the program print out <code class="docutils literal notranslate"><span class="pre">Hello!</span></code>.</p>
</section>
<hr class="docutils" />
<section id="creating-sub-menus">
<h2>3.5 Creating sub-menus<a class="headerlink" href="#creating-sub-menus" title="Link to this heading">#</a></h2>
<p>Creating sub-menus is quite easy. For example, to add an <code class="docutils literal notranslate"><span class="pre">Info...</span></code> sub-menu to your main application menu, you first create a menu representing it:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NSMenu *infoMenu;

infoMenu = AUTORELEASE ([NSMenu new]);
[infoMenu addItemWithTitle: @&quot;Info Panel...&quot; 
          action: @selector (orderFrontStandardInfoPanel:) 
          keyEquivalent: @&quot;&quot;];
[infoMenu addItemWithTitle: @&quot;Help...&quot; 
          action: @selector (orderFrontHelpPanel:)
          keyEquivalent: @&quot;?&quot;];
</pre></div>
</div>
<p>Then, you create an item in the main menu for your info menu, but instead of setting an action and a target for that item, you set the <code class="docutils literal notranslate"><span class="pre">infoMenu</span></code> as the sub-menu corresponding to that item:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NSMenuItem *menuItem;

menuItem = [menu addItemWithTitle: @&quot;Info...&quot; 
                 action: NULL 
                 keyEquivalent: @&quot;&quot;];
[menu setSubmenu: infoMenu  forItem: menuItem];
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="creating-a-standard-info-panel">
<h2>3.6 Creating a standard info panel<a class="headerlink" href="#creating-a-standard-info-panel" title="Link to this heading">#</a></h2>
<p>You may have noticed that in our previous example with the <code class="docutils literal notranslate"><span class="pre">Info...</span></code> sub-menu, we have used <code class="docutils literal notranslate"><span class="pre">orderFrontStandardInfoPanel:</span></code> as the action for the <code class="docutils literal notranslate"><span class="pre">Info</span></code> menu entry. The <code class="docutils literal notranslate"><span class="pre">Info</span></code> menu entry is usually supposed to display an ``Info Panel’’ (also called ``About Panel’’ on Microsoft Windows), with the title of the program, the version, the author, the copyright info. In this case, we use <code class="docutils literal notranslate"><span class="pre">orderFrontStandardInfoPanel:</span></code>, which is implemented by <code class="docutils literal notranslate"><span class="pre">NSApplication</span></code> (it is a GNUstep extension), and which displays a standard info panel. The information on what to display in the panel is taken from the <code class="docutils literal notranslate"><span class="pre">Info-gnustep.plist</span></code> file in the application’s main bundle. This file is created automatically for you at compile time by the GNUstep make system; but you can insert your own entries in this file as follows.</p>
<p>If your application name is, for example, <code class="docutils literal notranslate"><span class="pre">MyFirstApp</span></code>, then you need to create a file called <code class="docutils literal notranslate"><span class="pre">MyFirstAppInfo.plist</span></code> in your source directory (you do not need to add anything to your <code class="docutils literal notranslate"><span class="pre">GNUmakefile</span></code>; the make system looks for this file automatically). Here is an example of such a file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
  ApplicationName = &quot;My First Application&quot;;
  ApplicationDescription = &quot;An Example of how to use NSMenu&quot;;
  ApplicationRelease = &quot;0.1&quot;;
  Authors = (&quot;Your Name Here &lt;your.name@your.domain&gt;&quot;, 
             &quot;Another Name Here &lt;another.name@another.domain&gt;&quot;);
  Copyright = 
    &quot;Copyright (c) 2008 Your Name Here &lt;your.name@your.domain&gt;&quot;;
  CopyrightDescription = 
    &quot;This program is released under the GNU GPL&quot;;
}
</pre></div>
</div>
<p>You should of course edit this example filling in with the information appropriate for your own app. The file is in a format called ``property list’’ (that is why it has extension <code class="docutils literal notranslate"><span class="pre">plist</span></code>; see the <em>Basic Foundation Classes</em> GNUstep Mini Tutorial for more information on property lists). The entries should be self-explanatory; note that <code class="docutils literal notranslate"><span class="pre">Authors</span></code> should be equal to an array of names. If you want to omit some of the entries, you may safely do it.</p>
<p>Here is the full listing of our latest app source code, containing an info submenu able to display the Info Panel:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#include &lt;Foundation/Foundation.h&gt;
#include &lt;AppKit/AppKit.h&gt;

@interface MyDelegate : NSObject
- (void) printHello: (id)sender;
- (void) applicationWillFinishLaunching: (NSNotification *)not;
@end

@implementation MyDelegate : NSObject 
- (void) printHello: (id)sender
{
  printf (&quot;Hello!\n&quot;);
}

- (void) applicationWillFinishLaunching: (NSNotification *)not
{
  NSMenu *menu;
  NSMenu *infoMenu;
  NSMenuItem *menuItem;

  menu = AUTORELEASE ([NSMenu new]);

  infoMenu = AUTORELEASE ([NSMenu new]);

  [infoMenu addItemWithTitle: @&quot;Info Panel...&quot; 
            action: @selector (orderFrontStandardInfoPanel:) 
            keyEquivalent: @&quot;&quot;];

  [infoMenu addItemWithTitle: @&quot;Help...&quot; 
            action: @selector (orderFrontHelpPanel:)
            keyEquivalent: @&quot;?&quot;];

  menuItem = [menu addItemWithTitle: @&quot;Info...&quot; 
                   action: NULL 
                   keyEquivalent: @&quot;&quot;];

  [menu setSubmenu: infoMenu  forItem: menuItem];

  [menu addItemWithTitle: @&quot;Print Hello&quot;  
        action: @selector (printHello:)  
        keyEquivalent: @&quot;&quot;];

  [menu addItemWithTitle: @&quot;Quit&quot;  
        action: @selector (terminate:)  
        keyEquivalent: @&quot;q&quot;];

  [NSApp setMainMenu: menu];
}
@end

int main (int argc, const char **argv)
{ 
  [NSApplication sharedApplication];
  [NSApp setDelegate: [MyDelegate new]];

  return NSApplicationMain (argc, argv);
}
</pre></div>
</div>
<hr class="docutils" />
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="2_AppIcon.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">2 - Setting your application’s icon</p>
      </div>
    </a>
    <a class="right-next"
       href="4_PointsSizesRectangles.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">4 - Points, Sizes and Rectangles</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-menu">3.1 Creating a Menu</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#action-and-target">3.1.1 Action and Target</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-the-application-menu">3.2 Setting the Application Menu</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#our-first-application">3.3 Our First Application</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fun-with-nsmenuitem-s-target">3.4 Fun with NSMenuItem’s target</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-sub-menus">3.5 Creating sub-menus</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-standard-info-panel">3.6 Creating a standard info panel</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../../_sources/Guides/AppsWithCodeOnly/GettingStarted/3_Menus.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, GNUstep contributors.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>